<ion-view style="">
    <ion-nav-title> Trip Details<!--{{ getFormattedDate(tripgj.data.properties.start_ts) }}--></ion-nav-title>
    <ion-nav-buttons side="right">
        <button class="button button-icon ion-help" ng-click="startWalkthrough()"></button>
    </ion-nav-buttons>
    <ion-content class="has-header" overflow-scroll="true"> <!--padding="true"-->
        <div style="height: 10px;"></div>
        <div style="height: 18px; text-align: center; padding: 8px; color:rgba(4,6,9,0.65)">Your trip on {{getFormattedDate(tripgj.data.properties.start_ts) }}</div>
        <div style="height: 10px;"></div>
        
        
        <table class="title" style="border-spacing: 0; border-collapse: collapse; vertical-align: top; text-align: left; width: 100% !important; padding: 0;">
            <tr style="vertical-align: top; text-align: left; width: 100%; padding: 5px ;" align="left">
                <td class="line-left"  align="left" valign="middle">
                    <p style="color: #222222; font-weight: normal; text-align: left; line-height: 0; font-size: 14px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #E3E3E3; display: block; margin: 0; padding: 0;" align="left">
                    </p>
                </td>
                <td class="fare-header" align="center" valign="middle">TRIP MAP</td>
                <td class="line-right"  align="left" valign="middle">
                    <p style="color: #222222; font-weight: normal; text-align: left; line-height: 0; font-size: 14px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #E3E3E3; display: block; margin: 0; padding: 0;" align="left">
                    </p>
                </td>
            </tr>
        </table>
        
        
        <leaflet geojson="tripgj" id="detail" defaults="mapCtrl.defaults"
            height="50%" width="100%" data-tap-disabled="true" ><!--style="border: 1px solid rgba(38,30,30,0.64); box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)"-->
        </leaflet>
        
        
        <table class="title" style="border-spacing: 0; border-collapse: collapse; vertical-align: top; text-align: left; width: 100% !important; padding: 0;">
            <tr style="vertical-align: top; text-align: left; width: 100%; padding: 0;" align="left">
                <td class="line-left"  align="left" valign="middle">
                    <p style="color: #222222; font-weight: normal; text-align: left; line-height: 0; font-size: 14px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #E3E3E3; display: block; margin: 0; padding: 0;" align="left">
                    </p>
                </td>
            </tr>
        </table>
        
        
        <td class="trip-info" style=" -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: left; display: inline-block; width: 300px; padding: 25px 10px 25px 5px;"
            align="left" valign="top">
            <table class="trip-info-table" style="border-spacing: 0; border-collapse: collapse; vertical-align: top; text-align: left; margin-left: 19px; padding: 0;">
                <tr style="vertical-align: top; text-align: left; width: 100%; padding: 0;" align="left">
                    <td class="no-padding" style=" -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: left; display: inline-block; width: 300px; padding: 0;" align="left"
                        valign="top"></td>
                </tr>
                <!-- etd -->
                <tr class="trip-box trip-details" style="vertical-align: top; text-align: left; width: 600px;  padding: 20px 0;" align="left">
                    <table class="not-grid" style="border-spacing: 0; border-collapse: collapse; vertical-align: top; text-align: left; width: auto; padding: 0;">
                        <tr style="vertical-align: top; text-align: left; width: 100%; padding: 0;" align="left">
                            <td rowspan="4" class="vertical-line" style=" -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: left; display: table-cell; width: 17px !important; padding: 3px 18px 10px 17px;"
                                align="left" valign="top">
                                <div class="path"/>
                            </td>
                            <td class="time-section" style=" -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: left; display: table-cell; width: 220px; line-height: 16px; height: 57px; padding: 0 10px 10px 0;"
                                align="left" valign="top"> <span class="from time" style="font-size: 15px; font-weight: 500; color: #000000 !important;">{{getFormattedTime(trip.properties.start_ts)}}</span>
                                </br><span class="address" style="font-size: 11px; color: #999999 !important; line-height: 16px; text-decoration: none;">{{trip.start_place.properties.displayName}}</span>
                            </td>
                        </tr>
                        <tr style="vertical-align: top; text-align: left; width: 100%; padding: 0;" align="left">
                            <td class="time-section" style=" -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: left; display: table-cell; width: 220px; line-height: 16px; height: 57px; padding: 0 10px 10px 0;"
                                align="left" valign="top">
                                <span class="to time" style="font-size: 15px; font-weight: 500; color: #000000 !important;">{{getFormattedTime(trip.properties.end_ts)}}</span>
                                </br><span class="address" style="font-size: 11px; color: #999999 !important; line-height: 16px; text-decoration: none;">{{trip.end_place.properties.displayName}}</span>
                            </td>
                        </tr>
                    </table>
                </tr>
            </table>
        </td>
        
        
        <table class="title" style="border-spacing: 0; border-collapse: collapse; vertical-align: top; text-align: left; width: 100% !important; padding: 0;">
            <tr style="vertical-align: top; text-align: left; width: 100%; padding: 5px ;" align="left">
                <td class="line-left"  align="left" valign="middle">
                    <p style="color: #222222; text-align: left; line-height: 0; font-size: 14px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #E3E3E3; display: block; margin: 0; padding: 0;" align="left">
                    </p>
                </td>
                <td class="fare-header" align="center" valign="middle">TRIP BREAKDOWN</td>
                <td class="line-right"  align="left" valign="middle">
                    <p style="color: #222222; font-weight: normal; text-align: left; line-height: 0; font-size: 14px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #E3E3E3; display: block; margin: 0; padding: 0;" align="left">
                    </p>
                </td>
            </tr>
        </table>
        
        <table class="trip">
            <td class="distance-time" valign="top">
                <p>Trip Distance: {{getFormattedDistance(trip.properties.distance)}} KM.</p>
                <p> Trip Time: {{getFormattedTimeRange(trip.properties.start_ts, trip.properties.end_ts)}}.</p>
            </td>
        </table>
        <table class="breakdown-title not-grid" style="border-spacing: 0; border-collapse: collapse; vertical-align: center; text-align: center; width: 250px !important; padding: 0;">
            <td class="line right" style=" padding: 12px 0 5px;" align="left" valign="middle">
                <p style=" text-align: left; line-height: 0; font-size: 14px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #E3E3E3; display: block; margin-left:135px;" align="left">
                </p>
            </td>
        </table>
        <table class="trip">
            <tbody ng-repeat="i in getPercentages(trip)[1]">
                <tr ng-if="getPercentages(trip).indexOf(section) < getPercentages(trip).length" style="vertical-align: top; text-align: left; width: 100%;" align="left">
                    <td class="line-item" align="left" valign="top">
                        {{getPercentages(trip)[0][i].mode}}
                    </td>
                    <td  class="percentage" align="right" valign="top">{{getPercentages(trip)[0][i].per}}%</td>
                </tr>
            </tbody>
            <!--<tr style="vertical-align: top; text-align: left; width: 100%; padding: 0;" align="left">
             <td class="line-item" style="word-break: break-word; -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: left; display: table-cell; width: 300px; color: #808080; padding: 4px;" align="left" valign="top">
             In Vehicle
             </td>
             <td class="price" style="word-break: break-word; -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: right; display: table-cell; width: 90px; white-space: nowrap; padding: 4px;" align="right" valign="top">20%</td>
             </tr>
             <tr class="divider" style="vertical-align: top; text-align: left; border-bottom-width: 1px; border-bottom-color: #f0f0f0; border-bottom-style: solid; width: 100%; padding: 0;" align="left">
             <td class="line-item" style="word-break: break-word; -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: left; display: table-cell; width: 300px; color: #808080; padding: 4px 4px 15px;" align="left" valign="top">
             Time
             </td>
             <td class="price" style="word-break: break-word; -webkit-hyphens: auto; -moz-hyphens: auto; hyphens: auto; border-collapse: collapse !important; vertical-align: top; text-align: right; display: table-cell; width: 90px; white-space: nowrap; padding: 4px 4px 15px;" align="right" valign="top">70%</td>
             </tr>-->
            
        </table>
        
        <table class="title" style="border-spacing: 0; border-collapse: collapse; vertical-align: top; text-align: left; width: 100% !important; padding: 0;">
            <tr style="vertical-align: top; text-align: left; width: 100%; padding: 0;" align="left">
                <td class="line-left"  align="left" valign="middle">
                    <p style="color: #222222; font-weight: normal; text-align: left; line-height: 0; font-size: 14px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #E3E3E3; display: block; margin: 0; padding: 0;" align="left">
                    </p>
                </td>
            </tr>
        </table>
        
        
        <button ng-click="refreshTiles()" style="color:#353535;" class="button button-stable button-small button-full button-outline">Fix Map</button>
        <button ng-click="refreshMap()" style="color:#353535;" class="button button-stable button-small button-full button-outline">Refresh</button>
        <button ng-click="startSurvey()" style="color:#353535;" class="button button-stable button-small button-full button-outline">Fill Trip Survey</button>
        
        <div style="height: 10px;"></div>
    </ion-content>
</ion-view>
